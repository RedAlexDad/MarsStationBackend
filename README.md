## Разработка Интернет Приложений

### Предметная область "Станции на поверхности Марса"

<details style="font-size: 14px;">
<summary>
<span style="font-size: 16px; font-weight: bold;">Описание лабораторной работы</span>
</summary>

- **Цель работы**: создание веб-сервиса в бэкенде нашей системы для использования его в [`SPA`](https://github.com/RedAlexDad/MarsStationFrontend/tree/SPA)
- **Порядок показа**: Через `insomnia`/`postman` выполнить GET списка `заявок` (отфильтровать по дате формирования и
  статусу), выполнить GET списка `услуг` (с фильтром), удалить введенную `заявку` (если есть), добавить новую `услугу` с
  картинкой, добавить `услугу` в заявку, добавить вторую услугу, список `услуг` с заявкой-черновиком,
  посмотреть `заявку` (из 2 услуг), подтвердить введенную `заявку` (показать ошибку), сформировать `заявку`. Показать
  измененные данные через select, объяснить модели, сериализаторы.
- **Контрольные вопросы**: веб-сервис, REST, RPC, HTTP, OSI ISO
- **Диаграмма классов** с детализацией бэкенда (домены методов по `url` с интерфейсами, перечислить все методы, модели,
  таблицы БД) + insomnia/postman
- **Задание**: Создание веб-сервиса со всей итоговой бизнес логикой, но без авторизации, подключение его к БД и
  тестирование в `insomnia`/`postman`

Создание **веб-сервиса** для получения/редактирования данных из вашей БД. Требуется разработать все методы для
реализации итоговой бизнес логики вашего приложения. Для изображений `услуг` использовать `Minio` (рекомендуется) или
хранение файлов картинок в бинарном виде в БД.

**Требования к веб-сервису**

Методы и `url` в `API` должны соответствовать `REST`. Для списка `услуг` (как в 1 лабораторной) и `заявок` (по статусу и
диапазону даты формирования) нужно предусмотреть фильтрацию на бэкенде. Взаимодействие с БД через `ORM`. Не
делать `POST` `заявки`. Для логических действий в приложении (оплата, подтверждение, завершение) предусмотреть отдельные
методы для обновления конкретных полей. Заявка создается пустой, указывается автоматически `создатель`, дата создания и
статус, остальные поля указываются через `PUT` или смену статуса. При одобрении/отклонении заявки
проставляется `модератор` и дата завершения.

Статусы нельзя менять с любого на любой: `создатель` удаляет и формирует черновик заявки, а `модератор` отклоняет и
завершает сформированную заявку. При получении `заявки` возвращется список ее услуг с картинками. В списке `услуг`
возвращается id заявки-черновика этого пользователя для страницы `конструктора` заявки. В данной лабораторной
пользователь `создатель` зафиксирован во всех методах - укажите его константой через функцию `singleton`.

- Услуги - GET список, GET одна запись, POST добавление, PUT изменение, DELETE удаление, POST добавление в заявку
- Заявки - GET список (кроме удаленных и черновика), GET одна запись (поля `заявки` + ее `услуги`), PUT изменение (если
  есть доп поля заявки), PUT сформировать создателем, PUT завершить/отклонить модератором, DELETE удаление
- м-м - DELETE удаление из заявки, PUT изменение количества/значения в м-м (если есть доп поля м-м)

**Рекомендуется реализация методов для изображений**:

- добавление изображений отдельным методов по id услуги. Старое изображение заменяется/удаляется
- удаление изображения встроено в метод удаления услуги
- получение изображения для S3 напрямую по ссылке. При хранении картинки в БД - отдельный метод GET по id услуги.

* [Методические указания DRF](/tutorials/lab3-py/lab3_tutorial.md)
* [Методические указания Golang](/tutorials/lab3-go/README.md)
* [Пример подключения S3-хранилища](https://github.com/iu5git/Networking/tree/main/S3)
* [Пример использования Minio в Python](https://github.com/iu5git/Networking/tree/main/Minio_Python)

</details>